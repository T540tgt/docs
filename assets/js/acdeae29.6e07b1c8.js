"use strict";(self.webpackChunkdocs_oasis_io=self.webpackChunkdocs_oasis_io||[]).push([[9099],{2453:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>d,toc:()=>h});var a=t(4848),r=t(8453),o=t(5965),s=t(6116);const i={},l="Writing dApps on Emerald",d={id:"dapp/emerald/writing-dapps-on-emerald",title:"Writing dApps on Emerald",description:"This tutorial will show you how to set up dApp development environment for",source:"@site/docs/dapp/emerald/writing-dapps-on-emerald.mdx",sourceDirName:"dapp/emerald",slug:"/dapp/emerald/writing-dapps-on-emerald",permalink:"/dapp/emerald/writing-dapps-on-emerald",draft:!1,unlisted:!1,editUrl:"https://github.com/oasisprotocol/docs/edit/main/docs/dapp/emerald/writing-dapps-on-emerald.mdx",tags:[],version:"current",lastUpdatedAt:1723018842e3,frontMatter:{},sidebar:"developers",previous:{title:"Emerald ParaTime",permalink:"/dapp/emerald/"},next:{title:"Integrating BAND oracle smart contract",permalink:"/dapp/emerald/integrating-band-oracle-smart-contract"}},c={},h=[{value:"Oasis Consensus Layer and Emerald ParaTime",id:"oasis-consensus-layer-and-emerald-paratime",level:2},{value:"Testnet and Mainnet",id:"testnet-and-mainnet",level:2},{value:"Running a Private Oasis Network Locally",id:"running-a-private-oasis-network-locally",level:2},{value:"Create dApp on Emerald with Hardhat",id:"create-dapp-on-emerald-with-hardhat",level:2},{value:"Create dApp on Emerald with Remix - Ethereum IDE",id:"create-dapp-on-emerald-with-remix---ethereum-ide",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Truffle Support",id:"truffle-support",level:3},{value:"Deployment of my contract timed out on Testnet or Mainnet",id:"deployment-of-my-contract-timed-out-on-testnet-or-mainnet",level:3},{value:"Execution of my contract failed. How do I debug what went wrong?",id:"execution-of-my-contract-failed-how-do-i-debug-what-went-wrong",level:3},{value:"See also",id:"see-also",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"writing-dapps-on-emerald",children:"Writing dApps on Emerald"}),"\n",(0,a.jsx)(n.p,{children:"This tutorial will show you how to set up dApp development environment for\nEmerald to be able to write and deploy dApps on Oasis Emerald."}),"\n",(0,a.jsx)(n.p,{children:"We will walk you through the Hardhat configuration and - for those who prefer\na simpler web-only interface - the Remix IDE.\nOasis Emerald exposes an EVM-compatible interface so writing dApps isn't much\ndifferent compared to the original Ethereum Network!"}),"\n",(0,a.jsx)(n.h2,{id:"oasis-consensus-layer-and-emerald-paratime",children:"Oasis Consensus Layer and Emerald ParaTime"}),"\n",(0,a.jsxs)(n.p,{children:["Oasis Network consists of the consensus layer and a number of Layer 2 chains\ncalled the ParaTimes (to learn more, check the ",(0,a.jsx)(n.a,{href:"/general/oasis-network/",children:"Oasis Network\nOverview"})," chapter). Emerald is a ParaTime which implements the Ethereum\nVirtual Machine (EVM)."]}),"\n",(0,a.jsxs)(n.p,{children:["The minimum and also expected block time in Emerald is ",(0,a.jsx)(n.strong,{children:"6 seconds"}),". Any\nEmerald transaction will require at least this amount of time to be executed."]}),"\n",(0,a.jsxs)(n.p,{children:["The native Oasis addresses are Bech32-encoded (e.g. ",(0,a.jsx)(n.code,{children:"oasis1qpupfu7e2n6pkezeaw0yhj8mcem8anj64ytrayne"}),")\nwhile Emerald supports both the Bech32-encoded and the Ethereum-compatible\nhex-encoded addresses (e.g. ",(0,a.jsx)(n.code,{children:"0x90adE3B7065fa715c7a150313877dF1d33e777D5"}),"). The\nunderlying algorithm for signing the transactions is ",(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/EdDSA#Ed25519",children:"Ed25519"})," on the Consensus\nlayer and both ",(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/EdDSA#Ed25519",children:"Ed25519"})," and ",(0,a.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm",children:"ECDSA"})," in Emerald. The Ed25519 scheme is used\nmostly by the Emerald compute nodes for managing their computation rewards. For\nsigning your dApp-related transactions on Emerald you will probably want to use\nECDSA since this is the de facto scheme supported by Ethereum wallets and\nlibraries."]}),"\n",(0,a.jsxs)(n.p,{children:["Finally, the ParaTimes are not allowed to directly access your tokens stored in\nConsensus layer addresses. You will need to ",(0,a.jsx)(n.strong,{children:"deposit"})," tokens from your consensus\naccount to Emerald. Consult the ",(0,a.jsx)(n.a,{href:"/general/manage-tokens/",children:"How to transfer ROSE into Emerald\nParaTime"})," chapter to learn more."]}),"\n",(0,a.jsx)(n.h2,{id:"testnet-and-mainnet",children:"Testnet and Mainnet"}),"\n",(0,a.jsxs)(n.p,{children:["The Oasis Network currently has, similar to some other blockchains, two major\npublic deployments: the ",(0,a.jsx)(n.a,{href:"/node/mainnet/",children:"Mainnet"})," and the ",(0,a.jsx)(n.a,{href:"/node/testnet/",children:"Testnet"}),". The\nnative tokens are called ROSE and TEST respectively. Each deployment has its own\nstate, a different set of validators and ParaTimes. The state of the Mainnet is\nconsidered immutable for indefinite time, while the data on the Testnet can be\nsubject to wipe in the future."]}),"\n",(0,a.jsxs)(n.p,{children:["The Emerald ParaTime is deployed similarly: the ",(0,a.jsx)(n.a,{href:"/dapp/emerald/#mainnet",children:"Emerald Mainnet"})," is deployed on the Oasis Mainnet\nNetwork while the ",(0,a.jsx)(n.a,{href:"/dapp/emerald/#testnet",children:"Emerald Testnet"})," on the Oasis Testnet Network. The Emerald state on the Mainnet\nis stable. Testnet, apart from running the unstable version of the code and being prone to bugs, can\nhave the state deliberately wiped either on the Emerald ParaTime layer or on the Oasis Testnet\nNetwork level."]}),"\n",(0,a.jsx)(n.admonition,{title:"Never deploy production service on Testnet",type:"danger",children:(0,a.jsxs)(n.p,{children:["Because Testnet state can be wiped in the future, you should ",(0,a.jsx)(n.strong,{children:"never deploy a\nproduction service on the Testnet"}),"!"]})}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["For testing purposes, visit our ",(0,a.jsx)(n.a,{href:"https://faucet.testnet.oasis.io/",children:"Testnet faucet"})," to obtain some TEST which you\ncan then use on the Emerald Testnet to pay for gas fees. The faucet supports\nsending TEST both to your Consensus layer address or to your address inside the\nParaTime."]})}),"\n",(0,a.jsx)(n.h2,{id:"running-a-private-oasis-network-locally",children:"Running a Private Oasis Network Locally"}),"\n",(0,a.jsxs)(n.p,{children:["For convenient development and testing of your dApps the Oasis team prepared\nthe ",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"ghcr.io/oasisprotocol/emerald-localnet"})," Docker image which brings you a complete Oasis\nstack to your desktop. This network is isolated from the Mainnet or Testnet and\nconsists of:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"single Oasis validator node with 1-second block time and 30-second epoch,"}),"\n",(0,a.jsx)(n.li,{children:"single Oasis client node,"}),"\n",(0,a.jsx)(n.li,{children:"three compute nodes running Oasis Emerald,"}),"\n",(0,a.jsx)(n.li,{children:"PostgreSQL instance,"}),"\n",(0,a.jsx)(n.li,{children:"Oasis Web3 gateway with transaction indexer,"}),"\n",(0,a.jsx)(n.li,{children:"helper script which populates initial test accounts for you."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"To run the image, execute:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"docker run -it -p8545:8545 -p8546:8546 ghcr.io/oasisprotocol/emerald-localnet\n"})}),"\n",(0,a.jsx)(n.p,{children:"After a while, the tool will show you something like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"emerald-localnet 2023-02-28-git84730b2 (oasis-core: 22.2.6, emerald-paratime: 10.0.0, oasis-web3-gateway: 3.2.0-git84730b2)\n\nStarting oasis-net-runner with emerald...\nStarting postgresql...\nStarting oasis-web3-gateway...\nBootstrapping network and populating account(s) (this might take a minute)...\n\nAvailable Accounts\n==================\n(0) 0x75eCF0d4496C2f10e4e9aF3D4d174576Ee9010E2 (100 ROSE)\n(1) 0x903a7dce5a26a3f4DE2d157606c2191740Bc4BC9 (100 ROSE)\n(2) 0xF149ad5CBFfD92ba84F5784106f6Cb071A32a1b8 (100 ROSE)\n(3) 0x2315F40C1122400Df55483743B051D2997ef0a62 (100 ROSE)\n(4) 0xf6FdcacbA93A428A07d27dacEf1fBF25E2C65B0F (100 ROSE)\n\nPrivate Keys\n==================\n(0) 0x160f52faa5c0aecfa26c793424a04d53cbf23dcad5901ce15b50c2e85b9d6ca7\n(1) 0x0ba685723b47d8e744b1b70a9bea9d4d968f60205385ae9de99865174c1af110\n(2) 0xfa990cf0c22af455d2734c879a2a844ff99bd779b400bb0e2919758d1be284b5\n(3) 0x3bf225ef73b1b56b03ceec8bb4dfb4830b662b073b312beb7e7fec3159b1bb4f\n(4) 0xad0dd7ceb896fd5f5ddc76d56e54ee6d5c2a3ffeac7714d3ef544d3d6262512c\n\nHD Wallet\n==================\nMnemonic:       bench remain brave curve frozen verify dream margin alarm world repair innocent\nBase HD Path:   m/44'/60'/0'/0/%d\n\nWARNING: The chain is running in ephemeral mode. State will be lost after restart!\n\nListening on http://localhost:8545 and ws://localhost:8546\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Those familiar with local dApp environments will find the output above similar\nto ",(0,a.jsx)(n.code,{children:"geth --dev"})," or ",(0,a.jsx)(n.code,{children:"ganache-cli"})," commands or the ",(0,a.jsx)(n.code,{children:"geth-dev-assistant"})," npm\npackage. ",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"})," will spin up a private Oasis Network locally, generate\nand populate test accounts and make the following Web3 endpoints available for\nyou to use:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"http://localhost:8545"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"ws://localhost:8546"})}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["If you prefer using the same mnemonics each time (e.g. for testing purposes)\nor to populate just a single wallet, use ",(0,a.jsx)(n.code,{children:"-to"})," flag and pass the mnemonics or\nthe wallet addresses. For example"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'docker run -it -p8545:8545 -p8546:8546 ghcr.io/oasisprotocol/emerald-localnet -to "bench remain brave curve frozen verify dream margin alarm world repair innocent"\ndocker run -it -p8545:8545 -p8546:8546 ghcr.io/oasisprotocol/emerald-localnet -to "0x75eCF0d4496C2f10e4e9aF3D4d174576Ee9010E2,0xbDA5747bFD65F08deb54cb465eB87D40e51B197E"\n'})})]}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"})," runs in ephemeral mode. Any smart contract and wallet balance\nwill be lost after you quit the Docker container!"]})}),"\n",(0,a.jsx)(n.h2,{id:"create-dapp-on-emerald-with-hardhat",children:"Create dApp on Emerald with Hardhat"}),"\n",(0,a.jsx)(n.p,{children:"Let's begin writing our dApp with Hardhat. We will lay out a base for a modern\ndApp including TypeScript bindings for tests and later for the frontend\napplication."}),"\n",(0,a.jsxs)(n.p,{children:["First, make sure you installed ",(0,a.jsx)(n.a,{href:"https://nodejs.org",children:"Node.js"})," and that you have ",(0,a.jsx)(n.code,{children:"npm"})," and ",(0,a.jsx)(n.code,{children:"npx"}),"\nreadily available. Then run:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npx hardhat init\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Select the ",(0,a.jsx)(n.code,{children:"Create an advanced sample project that uses TypeScript"})," option and\nenter the root directory for your project. You can leave other options as\ndefault. After a while Hardhat will finish downloading the dependencies and\ncreate a simple greeter dApp."]}),"\n",(0,a.jsx)(n.p,{children:"To compile, deploy and test the smart contract of your sample project locally,\nmove to your project directory and type:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"$ npx hardhat compile\nCompiling 2 files with 0.8.4\nGenerating typings for: 2 artifacts in dir: typechain for target: ethers-v5\nSuccessfully generated 5 typings!\nCompilation finished successfully\n\n$ npx hardhat test\nNo need to generate any newer typings.\n\n\n  Greeter\nDeploying an Emerald Greeter with greeting: Hello, world!\nChanging greeting from 'Hello, world!' to 'Hola, mundo!'\n    \u2713 Should return the new greeting once it's changed (613ms)\n\n\n  1 passing (614ms)\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Hardhat already comes with a built-in EVM which is spun up from scratch each\ntime we call ",(0,a.jsx)(n.code,{children:"hardhat test"})," without parameters. It populates 20 accounts with\nETH and registers them to the ",(0,a.jsx)(n.a,{href:"https://docs.ethers.io/v5/",children:"ethers.js"})," instance used in the tests."]}),"\n",(0,a.jsxs)(n.p,{children:["Next, let's look at how to configure Hardhat for Emerald. For convenience, we\nassign the ",(0,a.jsx)(n.code,{children:"PRIVATE_KEY"})," environment variable a hex-encoded private key of your\nEmerald wallet containing tokens to pay for gas fees. If you are running\n",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"}),", use any of the five generated private keys."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'export PRIVATE_KEY="YOUR_0x_EMERALD_PRIVATE_KEY"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Next, we configure three networks: ",(0,a.jsx)(n.code,{children:"emerald_local"}),", ",(0,a.jsx)(n.code,{children:"emerald_testnet"}),", and\n",(0,a.jsx)(n.code,{children:"emerald_mainnet"}),". Open ",(0,a.jsx)(n.code,{children:"hardhat.config.ts"})," and replace the ",(0,a.jsx)(n.code,{children:"networks"})," field to\nmatch the following:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'networks: {\n    emerald_local: {\n      url: "http://localhost:8545",\n      accounts:\n        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],\n    },\n    emerald_testnet: {\n      url: "https://testnet.emerald.oasis.io",\n      accounts:\n        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],\n    },\n    emerald_mainnet: {\n      url: "https://emerald.oasis.io",\n      accounts:\n        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],\n    },\n  },\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Next, we increase the default timeout for mocha tests from 20 seconds to 60\nseconds. This step is not needed, if you will test your contracts solely on\n",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"}),", but is required for Testnet to avoid timeouts. Append the\nfollowing block to the ",(0,a.jsx)(n.code,{children:"config"})," object:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"mocha: {\n  timeout: 60000\n}\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"geth --dev"})," and ",(0,a.jsx)(n.code,{children:"ganache-cli"}),' tools use a so-called "instant mining" mode.\nIn this mode, a new block is mined immediately when a new transaction occurs in\nthe mempool. Neither Oasis Mainnet and Testnet Networks nor ',(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"}),"\nsupport such mode and the new block will always be mined at least after the 1\nsecond block time elapsed."]})}),"\n",(0,a.jsxs)(n.p,{children:["Now deploy the contract to the local ",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"})," Docker container by\nselecting the ",(0,a.jsx)(n.code,{children:"emerald_local"})," network we configured above and run the tests:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"$ npx hardhat run scripts/deploy.ts --network emerald_local\nNo need to generate any newer typings.\nGreeter deployed to: 0x4e1de2f6cf4e57a8f55b4a5dd1fce770db734962\n\n$ npx hardhat test --network emerald_local\nNo need to generate any newer typings.\n\n\n  Greeter\n    \u2713 Should return the new greeting once it's changed (6017ms)\n\n\n  1 passing (6s)\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Next, you can try deploying the contract to the Testnet. Temporarily replace\nyour ",(0,a.jsx)(n.code,{children:"PRIVATE_KEY"})," environment variable with your Testnet one and deploy the\ncontract by using the ",(0,a.jsx)(n.code,{children:"emerald_testnet"})," network. Similarly, you can also\nrun the tests."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'$ PRIVATE_KEY="0xYOUR_TESTNET_PRIVATE_KEY" npx hardhat run scripts/deploy.ts --network emerald_testnet\nNo need to generate any newer typings.\nGreeter deployed to: 0x735df9F166a2715bCA3D3A66B119CBef95a0D129\n\n$ PRIVATE_KEY="0xYOUR_TESTNET_PRIVATE_KEY" npx hardhat test --network emerald_testnet\nNo need to generate any newer typings.\n\n\n  Greeter\n    \u2713 Should return the new greeting once it\'s changed (21016ms)\n\n\n  1 passing (6s)\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Congratulations, you have just deployed your first smart contract to the public\nEmerald Testnet Network! If you are unsure, whether your contract was\nsuccessfully deployed, you can monitor the transactions on the Emerald block\nexplorer (",(0,a.jsx)(n.a,{href:"https://explorer.oasis.io/mainnet/emerald",children:"Mainnet"}),", ",(0,a.jsx)(n.a,{href:"https://explorer.oasis.io/testnet/emerald",children:"Testnet"}),"). This tool\nindexes all Emerald accounts, blocks, transactions and even offers a neat user\ninterface for browsing ETH-specifics like the ERC20 tokens and the ERC721 NFTs."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Emerald Block Explorer showing the latest transactions",src:t(2420).A+"",width:"2205",height:"1335"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Emerald Block Explorer showing our account 0x90adE3B7065fa715c7a150313877dF1d33e777D5 used for deploying the smart contract",src:t(7071).A+"",width:"2208",height:"1339"})}),"\n",(0,a.jsxs)(n.p,{children:["Finally, by selecting the ",(0,a.jsx)(n.code,{children:"emerald_mainnet"})," network and the corresponding\nprivate key, we can deploy the contract on the Mainnet:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'$ PRIVATE_KEY="0xYOUR_MAINNET_PRIVATE_KEY" npx hardhat run scripts/deploy.ts --network emerald_mainnet\nNo need to generate any newer typings.\nGreeter deployed to: 0x6e8e9e0DBCa4EF4a65eBCBe4032e7C2a6fb7C623\n'})}),"\n",(0,a.jsx)(n.h2,{id:"create-dapp-on-emerald-with-remix---ethereum-ide",children:"Create dApp on Emerald with Remix - Ethereum IDE"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://remix.ethereum.org",children:"Remix"})," is a popular web IDE for swift development, deployment and testing\nsmart contracts on the Ethereum Network. We will use it in combination with\nMetaMask to access the network settings and your wallet to sign and submit the\ntransactions."]}),"\n",(0,a.jsxs)(n.p,{children:["If you haven't done it yet, first ",(0,a.jsx)(n.a,{href:"/general/manage-tokens/#check-your-account",children:"install the MetaMask extension for your\nbrowser"}),". Import your wallet and configure Emerald Testnet and\nMainnet Networks. If you wish to connect to ",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/oasis-web3-gateway/pkgs/container/emerald-localnet",children:"emerald-localnet"})," container, configure\nthe local network as well."]}),"\n",(0,a.jsx)(n.p,{children:'When you open Remix for the first time, it automatically creates an example\nproject. Let\'s open one of the contracts and compile it in the "Solidity\ncompiler" tab.'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"The initial example project in Remix - Ethereum IDE",src:t(1830).A+"",width:"2219",height:"1332"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Solidity compiler tab",src:t(9389).A+"",width:"2217",height:"1338"})}),"\n",(0,a.jsx)(n.p,{children:'Next, in the "Deploy and Run Transactions" tab, select the "Injected Web3"\nenvironment. A MetaMask popup will appear and you will have to connect one or\nmore accounts with Remix. Once the connection succeeds, click on the "Deploy"\nbutton. The MetaMask popup appears again and you will have to review the\ntransaction, the gas options and finally confirm the transaction.'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Metamask transaction confirmation",src:t(6356).A+"",width:"2219",height:"1332"})}),"\n",(0,a.jsx)(n.p,{children:"If everything goes well, your transaction will be deployed using the selected\naccount in the MetaMask and the corresponding Emerald Network."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Successful contract deployment on Emerald Testnet with Remix",src:t(6267).A+"",width:"2219",height:"1332"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"Sometimes the gas limit estimation function might compute a slightly lower\nvalue from the required one. In this case, try increasing the gas limit\nmanually by 10% or 20%."})}),"\n",(0,a.jsxs)(n.p,{children:["Congratulations! Now you can start developing your own smart contracts on the\nOasis Emerald blockchain! Should you have any questions, do not hesitate to\nshare them with us on the ",(0,a.jsx)(n.a,{href:"https://oasis.io/discord",children:"#emerald-paratime Discord channel"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"truffle-support",children:"Truffle Support"}),"\n",(0,a.jsx)(n.admonition,{title:"Sunsetting Truffle",type:"info",children:(0,a.jsxs)(n.p,{children:["Per Consensys ",(0,a.jsx)(n.a,{href:"https://consensys.io/blog/consensys-announces-the-sunset-of-truffle-and-ganache-and-new-hardhat",children:"announcement"}),", Oasis will no longer support Truffle as of\n2023-10-05 and encourage immediate ",(0,a.jsx)(n.a,{href:"https://trufflesuite.com/docs/truffle/how-to/migrate-to-hardhat/",children:"migration"})," to Hardhat. Please see our\nrepository for the archived Truffle ",(0,a.jsx)(n.a,{href:"https://github.com/oasisprotocol/docs/blob/207a7b1a42b4afdac70b925e755f5546723e4831/docs/dapp/emerald/writing-dapps-on-emerald.mdx#L330-L570",children:"tutorial"}),"."]})}),"\n",(0,a.jsx)(n.h3,{id:"deployment-of-my-contract-timed-out-on-testnet-or-mainnet",children:"Deployment of my contract timed out on Testnet or Mainnet"}),"\n",(0,a.jsx)(n.p,{children:"Emerald validators, similar to Ethereum ones, order the execution of\ntransactions by gas price. When deploying a contract and the deployment times\nout, first wait another few rounds to make sure that the contract will not be\ndeployed eventually."}),"\n",(0,a.jsxs)(n.p,{children:["Next, check that your ",(0,a.jsx)(n.code,{children:"gasPrice"})," ",(0,a.jsx)(n.strong,{children:"is at least 10 nROSE"})," which is a minimum\nrequired gas price on Emerald. This value should already be propagated\nautomatically by the web3 endpoint, but your deployment configuration might\nhave ignored it."]}),"\n",(0,a.jsxs)(n.p,{children:["Finally, consider increasing the ",(0,a.jsx)(n.code,{children:"gasPrice"})," parameter in the Hardhat config\nfile by a fraction (e.g. 10% or 20%). This will require more ROSE from your\nwallet to deploy the contract, but you will also increase the chance of your\ntransaction being included in the block."]}),"\n",(0,a.jsx)(n.h3,{id:"execution-of-my-contract-failed-how-do-i-debug-what-went-wrong",children:"Execution of my contract failed. How do I debug what went wrong?"}),"\n",(0,a.jsxs)(n.p,{children:["If you are using Testnet or Mainnet, try to debug your transaction by finding\nit on the Emerald block explorer (",(0,a.jsx)(n.a,{href:"https://explorer.oasis.io/mainnet/emerald",children:"Mainnet"}),", ",(0,a.jsx)(n.a,{href:"https://explorer.oasis.io/testnet/emerald",children:"Testnet"}),"):"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Emerald block explorer showing a failed transaction",src:t(6959).A+"",width:"2219",height:"1332"})}),"\n",(0,a.jsxs)(n.p,{children:["In some cases, the transaction result on Emerald block explorer might be stuck\nat ",(0,a.jsx)(n.code,{children:"Error: (Awaiting internal transactions for reason)"}),". In this case or in\ncase of other Consensus layer \u2194 ParaTime issues, try to find your Emerald\ntransaction on the Oasis Scan (",(0,a.jsx)(n.a,{href:"https://oasisscan.com",children:"Mainnet"}),",\n",(0,a.jsx)(n.a,{href:"https://testnet.oasisscan.com",children:"Testnet"}),") which is primarily a Consensus layer explorer, but\noffers some introspection into ParaTime transactions as well. Once you find your\nfailed Emerald transaction, the ",(0,a.jsx)(n.code,{children:"Status"})," field should contain a more verbose\nerror description, for example:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Oasis Scan showing the Out of gas error for a transaction on Emerald",src:t(8052).A+"",width:"2219",height:"1332"})}),"\n",(0,a.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,a.jsx)(o.A,{item:(0,s.$)("/node/run-your-node/paratime-client-node")}),"\n",(0,a.jsx)(o.A,{item:(0,s.$)("/node/web3")})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},5965:(e,n,t)=>{t.d(n,{A:()=>g});t(6540);var a=t(4164),r=t(8774),o=t(4142),s=t(5846),i=t(6654),l=t(1312),d=t(1107);const c={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};var h=t(4848);function p(e){let{href:n,children:t}=e;return(0,h.jsx)(r.A,{href:n,className:(0,a.A)("card padding--lg",c.cardContainer),children:t})}function m(e){let{href:n,icon:t,title:r,description:o}=e;return(0,h.jsxs)(p,{href:n,children:[(0,h.jsxs)(d.A,{as:"h2",className:(0,a.A)("text--truncate",c.cardTitle),title:r,children:[t," ",r]}),o&&(0,h.jsx)("p",{className:(0,a.A)("text--truncate",c.cardDescription),title:o,children:o})]})}function u(e){let{item:n}=e;const t=(0,o.Nr)(n),a=function(){const{selectMessage:e}=(0,s.W)();return n=>e(n,(0,l.T)({message:"{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:n}))}();return t?(0,h.jsx)(m,{href:t,icon:"\ud83d\uddc3\ufe0f",title:n.label,description:n.description??a(n.items.length)}):null}function f(e){let{item:n}=e;const t=(0,i.A)(n.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",a=(0,o.cC)(n.docId??void 0);return(0,h.jsx)(m,{href:n.href,icon:t,title:n.label,description:n.description??a?.description})}function g(e){let{item:n}=e;switch(n.type){case"link":return(0,h.jsx)(f,{item:n});case"category":return(0,h.jsx)(u,{item:n});default:throw new Error(`unknown item type ${JSON.stringify(n)}`)}}},5846:(e,n,t)=>{t.d(n,{W:()=>d});var a=t(6540),r=t(4586);const o=["zero","one","two","few","many","other"];function s(e){return o.filter((n=>e.includes(n)))}const i={locale:"en",pluralForms:s(["one","other"]),select:e=>1===e?"one":"other"};function l(){const{i18n:{currentLocale:e}}=(0,r.A)();return(0,a.useMemo)((()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:s(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),i}}),[e])}function d(){const e=l();return{selectMessage:(n,t)=>function(e,n,t){const a=e.split("|");if(1===a.length)return a[0];a.length>t.pluralForms.length&&console.error(`For locale=${t.locale}, a maximum of ${t.pluralForms.length} plural forms are expected (${t.pluralForms.join(",")}), but the message contains ${a.length}: ${e}`);const r=t.select(n),o=t.pluralForms.indexOf(r);return a[Math.min(o,a.length-1)]}(t,n,e)}}},6116:(e,n,t)=>{t.d(n,{$:()=>o});var a=t(2252);function r(e){for(const n of e){const e=n.href;e&&void 0===globalThis.sidebarItemsMap[e]&&(globalThis.sidebarItemsMap[e]=n),"category"===n.type&&r(n.items)}}function o(e){const n=(0,a.r)();if(!n)throw new Error("Unexpected: cant find docsVersion in current context");if(void 0===globalThis.sidebarItemsMap){globalThis.sidebarItemsMap={};for(const e in n.docsSidebars)r(n.docsSidebars[e])}if(void 0===globalThis.sidebarItemsMap[e])throw console.log("Registered sidebar items:"),console.log(globalThis.sidebarItemsMap),new Error("Unexpected: sidebar item with href "+e+" does not exist.");return globalThis.sidebarItemsMap[e]}},2420:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/block_explorer1-300ad8505c206bca6ecb6416836e6770.png"},7071:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/block_explorer2-c07d43edbfeb9e90e1b38710179e9062.png"},6959:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/oasisscan1-024c1033c1ceeff4ca4f4294f544ce9c.png"},8052:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/oasisscan2-00e68913dfa621eb7c5f170e3b2f6378.png"},1830:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/remix1-400bc72123a178beea4c86d2ba9857cd.png"},9389:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/remix2-66fd8dbfe9f2a299501f5f9c75bdd08d.png"},6356:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/remix3-e2db0ab19df6a1aff70c68018b93e897.png"},6267:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/remix4-41183efd0966503c866863efba485d1c.png"},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var a=t(6540);const r={},o=a.createContext(r);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);